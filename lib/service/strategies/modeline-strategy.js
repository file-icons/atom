"use strict";const HeaderStrategy=require("./header-strategy.js"),IconTables=require("../../icons/icon-tables.js");class ModelineStrategy extends HeaderStrategy{constructor(){super({name:"modelines",priority:6})}matchIcon(resource){const data=this.getFirstLine(resource.data)||null;if(null===data)return null;// Emacs
let tokens=data.match(/-\*-(?:(?:(?!mode\s*:)[^:;]+:[^:;]+;)*\s*mode\s*:)?\s*([\w+-]+)\s*(?:;[^:;]+:[^:;]+?)*;?\s*-\*-/i);return tokens&&"fundamental"!==tokens[1]?IconTables.matchLanguage(tokens[1])||null:(tokens=data.match(/(?:(?:\s|^)vi(?:m[<=>]?\d+|m)?|[\t ]ex)(?=:(?=\s*set?\s[^\n:]+:)|:(?!\s*set?\s))(?:(?:\s|\s*:\s*)\w*(?:\s*=(?:[^\n\\\s]|\\.)*)?)*[\s:](?:filetype|ft|syntax)\s*=(\w+)(?=\s|:|$)/i),tokens?IconTables.matchLanguage(tokens[1])||null:null);// Vim
}}module.exports=new ModelineStrategy;